(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{137:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return i})),t.d(n,"metadata",(function(){return c})),t.d(n,"rightToc",(function(){return l})),t.d(n,"default",(function(){return p}));var r=t(2),o=t(9),a=(t(0),t(224)),i={title:"C/C++ Compilation"},c={id:"programming/C++/Compilation",isDocsHomePage:!1,title:"C/C++ Compilation",description:"The C/C++ compilation, or building, process contains fours stages.",source:"@site/docs/programming/C++/Compilation.md",permalink:"/docs/programming/C++/Compilation",editUrl:"https://github.com/lingt-xyz/io/tree/master/docs/programming/C++/Compilation.md",lastUpdatedAt:1596099793,sidebar:"cplusplus",previous:{title:"C++",permalink:"/docs/programming/C++/C++"},next:{title:"GCC Compiler",permalink:"/docs/programming/C++/GCC"}},l=[{value:"1. Preprocessing",id:"1-preprocessing",children:[]},{value:"2. Compilation",id:"2-compilation",children:[]},{value:"3. Assembly",id:"3-assembly",children:[]},{value:"4. Linking",id:"4-linking",children:[]},{value:"References",id:"references",children:[]}],s={rightToc:l};function p(e){var n=e.components,t=Object(o.a)(e,["components"]);return Object(a.b)("wrapper",Object(r.a)({},s,t,{components:n,mdxType:"MDXLayout"}),Object(a.b)("p",null,"The C/C++ compilation, or building, process contains fours stages."),Object(a.b)("p",null,"Namely: Preprocessing, Compilation, Assembly, Linking"),Object(a.b)("p",null,"Take the following code as an example:"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-c"}),'/*\n * "Hello, World!": A classic.\n */\n\n#include <stdio.h>\n\nint\nmain(void)\n{\n    puts("Hello, World!");\n    return 0;\n}\n')),Object(a.b)("h2",{id:"1-preprocessing"},"1. Preprocessing"),Object(a.b)("p",null,"Lines starting with a ",Object(a.b)("inlineCode",{parentName:"p"},"#")," character are interpreted by the preprocessor as preprocessor commands. These commands form a simple macro language with its own syntax and semantics."),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-bash"}),"cc -E hello_world.c\n")),Object(a.b)("p",null,"Given the \u201cHello, World!\u201d example above, the preprocessor will produce the contents of the ",Object(a.b)("inlineCode",{parentName:"p"},"stdio.h")," header file joined with the contents of the ",Object(a.b)("inlineCode",{parentName:"p"},"hello_world.c")," file, stripped free from its leading comment."),Object(a.b)("hr",null),Object(a.b)("h2",{id:"2-compilation"},"2. Compilation"),Object(a.b)("p",null,"The preprocessed code is translated to assembly instructions specific to the target processor architecture. These form an intermediate human readable language."),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-bash"}),"cc -S hello_world.c\n")),Object(a.b)("p",null,"This will create a file named ",Object(a.b)("inlineCode",{parentName:"p"},"hello_world.s"),", containing the generated assembly instructions."),Object(a.b)("hr",null),Object(a.b)("h2",{id:"3-assembly"},"3. Assembly"),Object(a.b)("p",null,"An assembler is used to translate the assembly instructions to object code. The output consists of actual instructions to be run by the target processor."),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-bash"}),"cc -c hello_world.c\n")),Object(a.b)("p",null,"Running the above command will create a file named ",Object(a.b)("inlineCode",{parentName:"p"},"hello_world.o"),", containing the object code of the program. The contents of this file is in a binary format and can be inspected using ",Object(a.b)("inlineCode",{parentName:"p"},"hexdump")," or ",Object(a.b)("inlineCode",{parentName:"p"},"od")," by running either one of the following commands:"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-bash"}),"hexdump hello_world.o\nod -c hello_world.o\n")),Object(a.b)("hr",null),Object(a.b)("h2",{id:"4-linking"},"4. Linking"),Object(a.b)("p",null,"The object code generated in the assembly stage is composed of machine instructions that the processor understands but some pieces of the program are out of order or missing. To produce an executable program, the existing pieces have to be rearranged and the missing ones filled in. This process is called linking."),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-bash"}),"cc -o hello_world hello_world.c\n")),Object(a.b)("p",null,"The linker will arrange the pieces of object code so that functions in some pieces can successfully call functions in other ones. It will also add pieces containing the instructions for library functions used by the program. In the case of the \u201cHello, World!\u201d program, the linker will add the object code for the ",Object(a.b)("inlineCode",{parentName:"p"},"puts")," function."),Object(a.b)("hr",null),Object(a.b)("h2",{id:"references"},"References"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},Object(a.b)("a",Object(r.a)({parentName:"li"},{href:"http://faculty.cs.niu.edu/~mcmahon/CS241/Notes/compile.html"}),"The C++ compilation process")),Object(a.b)("li",{parentName:"ul"},Object(a.b)("a",Object(r.a)({parentName:"li"},{href:"https://www.calleerlandsson.com/the-four-stages-of-compiling-a-c-program/"}),"The Four Stages of Compiling a C Program"))))}p.isMDXComponent=!0},224:function(e,n,t){"use strict";t.d(n,"a",(function(){return b})),t.d(n,"b",(function(){return d}));var r=t(0),o=t.n(r);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function c(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var s=o.a.createContext({}),p=function(e){var n=o.a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):c(c({},n),e)),t},b=function(e){var n=p(e.components);return o.a.createElement(s.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return o.a.createElement(o.a.Fragment,{},n)}},m=o.a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,a=e.originalType,i=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),b=p(t),m=r,d=b["".concat(i,".").concat(m)]||b[m]||u[m]||a;return t?o.a.createElement(d,c(c({ref:n},s),{},{components:t})):o.a.createElement(d,c({ref:n},s))}));function d(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var a=t.length,i=new Array(a);i[0]=m;var c={};for(var l in n)hasOwnProperty.call(n,l)&&(c[l]=n[l]);c.originalType=e,c.mdxType="string"==typeof e?e:r,i[1]=c;for(var s=2;s<a;s++)i[s]=t[s];return o.a.createElement.apply(null,i)}return o.a.createElement.apply(null,t)}m.displayName="MDXCreateElement"}}]);