(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{162:function(e,t,r){"use strict";r.r(t),r.d(t,"frontMatter",(function(){return o})),r.d(t,"metadata",(function(){return l})),r.d(t,"rightToc",(function(){return c})),r.d(t,"default",(function(){return b}));var a=r(2),n=r(9),i=(r(0),r(185)),o={title:"SOEN 321 Project"},l={id:"course/SOEN321_Project",isDocsHomePage:!1,title:"SOEN 321 Project",description:"SOEN 321 Winter 2019",source:"@site/docs/course/SOEN321_Project.md",permalink:"/docs/course/SOEN321_Project",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/course/SOEN321_Project.md",sidebar:"courses",previous:{title:"SOEN 321",permalink:"/docs/course/SOEN321"}},c=[{value:"Topic 6 DNS Interception Study",id:"topic-6-dns-interception-study",children:[{value:"Who Is Answering My Queries",id:"who-is-answering-my-queries",children:[]}]},{value:"What need to do",id:"what-need-to-do",children:[]},{value:"What is in the article",id:"what-is-in-the-article",children:[{value:"Terminology",id:"terminology",children:[]},{value:"1. Introduction",id:"1-introduction",children:[]},{value:"2. Threat Model and Mechanisms",id:"2-threat-model-and-mechanisms",children:[]},{value:"3. Methodology and Dataset",id:"3-methodology-and-dataset",children:[]}]},{value:"DNS Profiling (Python)",id:"dns-profiling-python",children:[{value:"Source code",id:"source-code",children:[]},{value:"Steps",id:"steps",children:[]},{value:"Next",id:"next",children:[]}]}],s={rightToc:c};function b(e){var t=e.components,r=Object(n.a)(e,["components"]);return Object(i.b)("wrapper",Object(a.a)({},s,r,{components:t,mdxType:"MDXLayout"}),Object(i.b)("p",null,"SOEN 321 Winter 2019"),Object(i.b)("h2",{id:"topic-6-dns-interception-study"},"Topic 6 DNS Interception Study"),Object(i.b)("h3",{id:"who-is-answering-my-queries"},"Who Is Answering My Queries"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"https://www.usenix.org/conference/usenixsecurity18/presentation/liu-baojun"}),"Website")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"https://www.usenix.org/system/files/conference/usenixsecurity18/sec18-liu_0.pdf"}),"PDF")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"https://www.usenix.org/sites/default/files/conference/protected-files/security18_slides_liu.pdf"}),"Slides")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"https://www.youtube.com/watch?v=jp1ktGTUOQs"}),"Video"))),Object(i.b)("h2",{id:"what-need-to-do"},"What need to do"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Set a few free domains"),Object(i.b)("li",{parentName:"ul"},"Use a residential proxy service like the authors - instead you can also start with free hosting services"),Object(i.b)("li",{parentName:"ul"},"Attempt to replicate as much as you can from the paper (exclude the China part)\n")),Object(i.b)("h2",{id:"what-is-in-the-article"},"What is in the article"),Object(i.b)("h3",{id:"terminology"},"Terminology"),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},"ISPs: Internet Service Providers"),Object(i.b)("li",{parentName:"ol"},"DNS: Domain Name System, resolving human-readable names to numerical IP addresses"),Object(i.b)("li",{parentName:"ol"},"DNS transparent proxy",Object(i.b)("ul",{parentName:"li"},Object(i.b)("li",{parentName:"ul"},Object(i.b)("em",{parentName:"li"},"Web proxies")," work by intercepting a request, modifying the request if necessary, then handling or forwarding the request to its destination. Proxies allow service providers to shape and optimize the way users connect to their services, but they also allow network providers to impact the way users or employees access external resources."),Object(i.b)("li",{parentName:"ul"},"Traditionally, proxies are accessed by configuring the user\u2019s application or network settings. "),Object(i.b)("li",{parentName:"ul"},"With transparent proxying, the proxy intercepts requests by intercepting packets directed to the destination, making it seem as though the request is handled by the destination itself. This allows service providers to implement proxying without having to reconfigure the user\u2019s computer."),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"https://www.maxcdn.com/one/visual-glossary/transparent-proxy/"}),"What is a Transparent Proxy?")))),Object(i.b)("li",{parentName:"ol"},"ASes: Autonomous Systems"),Object(i.b)("li",{parentName:"ol"},"DNSIntercept: hidden interception of the DNS resolution path"),Object(i.b)("li",{parentName:"ol"},"TLD: Top-Level Domains"),Object(i.b)("li",{parentName:"ol"},"SLD: Second-Level Domains"),Object(i.b)("li",{parentName:"ol"},"FQDN: a fully qualified domain name")),Object(i.b)("h3",{id:"1-introduction"},"1. Introduction"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"How"),Object(i.b)("ol",{parentName:"li"},Object(i.b)("li",{parentName:"ol"},"DNS queries from end users are handled by recursive DNS servers for scalability."))),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"The concerns rasied from DNS interception:"),Object(i.b)("ol",{parentName:"li"},Object(i.b)("li",{parentName:"ol"},"The interception is not authorized by users and is difficult to detect on the users\u2019 side, which leads to ethical concerns;"),Object(i.b)("li",{parentName:"ol"},"Users have higher risks to put the resolution trust to alternative recursive DNS servers, which often lack proper maintenance (e.g., equipped with outdated DNS software), compared to well-known public DNS servers;"),Object(i.b)("li",{parentName:"ol"},"Certain security-related functionalities are affected or even broken, e.g., some alternative DNS resolvers do not provide DNSSEC."))),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"Challenges:"),Object(i.b)("ol",{parentName:"li"},Object(i.b)("li",{parentName:"ol"},"Acquire clients belonging to different ASes to perform a large-scale measurement, which also should allow fine-tuning on the measurement parameters. Advertising networks, HTTP proxy networks, and Internet scanners cannot fulfill the conditions at the same time. "),Object(i.b)("li",{parentName:"ol"},"Verify whether the DNS resolution is intercepted rather than reaching users\u2019 designated recursive nameservers. Since on-path devices are able to spoof the IP addresses in the DNS responses, it is difficult to sense the existence of DNS interception merely from the clients."))),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"Approaches"),Object(i.b)("ol",{parentName:"li"},Object(i.b)("li",{parentName:"ol"},"Devise a new measurement methodology."),Object(i.b)("li",{parentName:"ol"},"Register a set of domains (e.g., OurDomain.TLD), and use the authoritative nameservers controlled by us to handle resolutions.")))),Object(i.b)("h3",{id:"2-threat-model-and-mechanisms"},"2. Threat Model and Mechanisms"),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Domain Resolution Process"),Object(i.b)("ol",{parentName:"li"},Object(i.b)("li",{parentName:"ol"},"FQDN: ",Object(i.b)("inlineCode",{parentName:"li"},"www.example.com")),Object(i.b)("li",{parentName:"ol"},"SLD: ",Object(i.b)("inlineCode",{parentName:"li"},"example.com")),Object(i.b)("li",{parentName:"ol"},"TLD: ",Object(i.b)("inlineCode",{parentName:"li"},"com"))),Object(i.b)("p",{parentName:"li"},"![Domain Resolution Process]","({{ site.baseurl }}/resources/note/SOEN321/DRP.png)")),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Threat Model"),Object(i.b)("p",{parentName:"li"},"![Threat Model]","({{ site.baseurl }}/resources/note/SOEN321/DRP_TM.png)"),Object(i.b)("ol",{parentName:"li"},Object(i.b)("li",{parentName:"ol"},"redirect or replicate the requests to alternative resolvers"),Object(i.b)("li",{parentName:"ol"},"before responses are sent from alternative resolvers back to clients, the sources are replaced with addresses of the original resolvers.")),Object(i.b)("p",{parentName:"li"},"![DNS resolution paths]","({{ site.baseurl }}/resources/note/SOEN321/DNSRP.png)"),Object(i.b)("ul",{parentName:"li"},Object(i.b)("li",{parentName:"ul"},"Taxonomy of DNS resolution paths:",Object(i.b)("ol",{parentName:"li"},Object(i.b)("li",{parentName:"ol"},"Normal resolution"),Object(i.b)("li",{parentName:"ol"},"Request redirection"),Object(i.b)("li",{parentName:"ol"},"Request replication"),Object(i.b)("li",{parentName:"ol"},"Direct responding"))))),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Potential Interceptors"),Object(i.b)("ul",{parentName:"li"},Object(i.b)("li",{parentName:"ul"},"Censor and firewall"),Object(i.b)("li",{parentName:"ul"},"Malware and anti-virus (AV) software"),Object(i.b)("li",{parentName:"ul"},"Enterprise proxy")))),Object(i.b)("h3",{id:"3-methodology-and-dataset"},"3. Methodology and Dataset"),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},"Overview",Object(i.b)("ul",{parentName:"li"},Object(i.b)("li",{parentName:"ul"},"Approach",Object(i.b)("ol",{parentName:"li"},Object(i.b)("li",{parentName:"ol"},"instruct a client to send a DNS request about one of our controlled domains to a public resolver A;"),Object(i.b)("li",{parentName:"ol"},"record its corresponding request at our authoritative nameservers, which originates from recursive resolver B; and"),Object(i.b)("li",{parentName:"ol"},"compare A with B. As a complementary step, we also"),Object(i.b)("li",{parentName:"ol"},"validate the response eventually received by the client."))))),Object(i.b)("li",{parentName:"ol"},"Methodology",Object(i.b)("ul",{parentName:"li"},Object(i.b)("li",{parentName:"ul"},"DNS packet: {",Object(i.b)("em",{parentName:"li"},"Src IP, Dst IP, Protocol, RR Type, Requested Domain"),"}"),Object(i.b)("li",{parentName:"ul"},"Generate DNS requets: ",Object(i.b)("em",{parentName:"li"},"UUID.Google.OurDomain.TLD"),", UUID should be distinct."),Object(i.b)("li",{parentName:"ul"},"Generate DNS responses"),Object(i.b)("li",{parentName:"ul"},"Identifying egress IPs of public DNS"))),Object(i.b)("li",{parentName:"ol"},"Vantage points"),Object(i.b)("li",{parentName:"ol"},"Dataset")),Object(i.b)("h2",{id:"dns-profiling-python"},"DNS Profiling (Python)"),Object(i.b)("h3",{id:"source-code"},"Source code"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"https://github.com/lingt-xyz/Information-Systems-Security"}),"Github"))),Object(i.b)("h3",{id:"steps"},"Steps"),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},"Domains are fetching from website ",Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"https://www.alexa.com/topsites"}),"global topsites")," and ",Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"https://www.alexa.com/topsites/category"}),"category topsites")),Object(i.b)("li",{parentName:"ol"},"Use ",Object(i.b)("inlineCode",{parentName:"li"},"BeautifulSoup")," to crab the webpage to get the domains of top websites."),Object(i.b)("li",{parentName:"ol"},"Write these records to files ",Object(i.b)("inlineCode",{parentName:"li"},"top-world-%yyyyMMdd%")," and ",Object(i.b)("inlineCode",{parentName:"li"},"top-categories-%yyyyMMdd%"),"."),Object(i.b)("li",{parentName:"ol"},"Get the list of the countries of so-called the enemy of Internet from ",Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"https://en.wikipedia.org/wiki/Internet_censorship_and_surveillance_by_country"}),"wikipedia")),Object(i.b)("li",{parentName:"ol"},"Search these countries' DNS from web."),Object(i.b)("li",{parentName:"ol"},"Use these DNSs to query the domains which fetched from the third step."),Object(i.b)("li",{parentName:"ol"},"Log the response to ",Object(i.b)("inlineCode",{parentName:"li"},"output-%yyyyMMdd%")," file."),Object(i.b)("li",{parentName:"ol"},"Total $20+$ DNSs, $800+$ domains, $18700$ records.")),Object(i.b)("h3",{id:"next"},"Next"),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},"Add custome domains"),Object(i.b)("li",{parentName:"ol"},"Confirm unuseful DNS"),Object(i.b)("li",{parentName:"ol"},"Statistics")))}b.isMDXComponent=!0},185:function(e,t,r){"use strict";r.d(t,"a",(function(){return p})),r.d(t,"b",(function(){return d}));var a=r(0),n=r.n(a);function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var s=n.a.createContext({}),b=function(e){var t=n.a.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):l(l({},t),e)),r},p=function(e){var t=b(e.components);return n.a.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.a.createElement(n.a.Fragment,{},t)}},m=n.a.forwardRef((function(e,t){var r=e.components,a=e.mdxType,i=e.originalType,o=e.parentName,s=c(e,["components","mdxType","originalType","parentName"]),p=b(r),m=a,d=p["".concat(o,".").concat(m)]||p[m]||u[m]||i;return r?n.a.createElement(d,l(l({ref:t},s),{},{components:r})):n.a.createElement(d,l({ref:t},s))}));function d(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=r.length,o=new Array(i);o[0]=m;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:a,o[1]=l;for(var s=2;s<i;s++)o[s]=r[s];return n.a.createElement.apply(null,o)}return n.a.createElement.apply(null,r)}m.displayName="MDXCreateElement"}}]);