(window.webpackJsonp=window.webpackJsonp||[]).push([[100],{237:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return o})),n.d(t,"metadata",(function(){return s})),n.d(t,"rightToc",(function(){return c})),n.d(t,"default",(function(){return u}));var i=n(2),a=n(9),r=(n(0),n(268)),o={},s={id:"programming/container/Container",isDocsHomePage:!1,title:"Container",description:"Some basics about containerization.",source:"@site/docs/programming/container/Container.md",permalink:"/docs/programming/container/Container",editUrl:"https://github.com/lingt-xyz/io/tree/master/docs/programming/container/Container.md",lastUpdatedAt:1596099793,sidebar:"container",next:{title:"Docker",permalink:"/docs/programming/container/Docker"}},c=[{value:"What is container",id:"what-is-container",children:[]},{value:"Why it works",id:"why-it-works",children:[{value:"cgroups",id:"cgroups",children:[]},{value:"subsystem",id:"subsystem",children:[]},{value:"kernfs",id:"kernfs",children:[]}]},{value:"LXC",id:"lxc",children:[{value:"Advantages",id:"advantages",children:[]}]},{value:"Docker",id:"docker",children:[{value:"Advantages",id:"advantages-1",children:[]}]},{value:"LXC v.s. Docker",id:"lxc-vs-docker",children:[{value:"Process Management",id:"process-management",children:[]},{value:"State Management",id:"state-management",children:[]},{value:"Portability",id:"portability",children:[]}]},{value:"Kubernetes",id:"kubernetes",children:[]},{value:"References",id:"references",children:[]}],l={rightToc:c};function u(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(r.b)("wrapper",Object(i.a)({},l,n,{components:t,mdxType:"MDXLayout"}),Object(r.b)("p",null,"Some basics about containerization."),Object(r.b)("h2",{id:"what-is-container"},"What is container"),Object(r.b)("p",null,'Containers decouple software applications from the operating system, giving users a clean and minimal Linux environment while running everything else in one or more isolated "containers". The purpose of a container is to launch a limited set of applications or services (often referred to as microservices) and have them run within a self-contained sandboxed environment.'),Object(r.b)("hr",null),Object(r.b)("h2",{id:"why-it-works"},"Why it works"),Object(r.b)("h3",{id:"cgroups"},"cgroups"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",Object(i.a)({parentName:"li"},{href:"http://man7.org/linux/man-pages/man7/cgroups.7.html"}),"cgroups")," - Linux control groups, are a Linux kernel feature which allow processes to be organized into hiberachical groups whose usage of various types of resources can then be limited and monitored. The kernel's cgroup interface is provided through a pseudo-filesystem called cgroupfs.  Grouping is implemented in the core cgroup kernel code, while resource tracking and limits are implemented in a set of per-resource-type subsystems (memory, CPU, and so on)."),Object(r.b)("li",{parentName:"ul"},"A ",Object(r.b)("inlineCode",{parentName:"li"},"cgroup")," is a collection of processes that are bound to a set of limits or parameters defined via the cgroup filesystem.")),Object(r.b)("h3",{id:"subsystem"},"subsystem"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"A ",Object(r.b)("inlineCode",{parentName:"li"},"subsystem")," is a kernel component that modifies the behavior of the processes in a cgroup.  Various subsystems have been implemented, making it possible to do things such as limiting the amount of CPU time and memory available to a cgroup, accounting for the CPU time used by a cgroup, and freezing and resuming execution of the processes in a cgroup.  Subsystems are sometimes also known as resource controllers (or simply, controllers)."),Object(r.b)("li",{parentName:"ul"},"The cgroups for a controller are arranged in a hierarchy. This hierarchy is defined by creating, removing, and renaming subdirectories within the cgroup filesystem. At each level of the hierarchy, attributes (e.g., limits) can be defined. The limits, control, and accounting provided by cgroups generally have effect throughout the subhierarchy underneath the cgroup where the attributes are defined. Thus, for example, the limits placed on a cgroup at a higher level in the hierarchy cannot be exceeded by descendant cgroups.")),Object(r.b)("h3",{id:"kernfs"},"kernfs"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"In the Linux kernel, ",Object(r.b)("a",Object(i.a)({parentName:"li"},{href:"https://en.wikipedia.org/wiki/Kernfs_(Linux)"}),"kernfs")," is a set of functions that contain the functionality required for creating pseudo file systems used internally by various kernel subsystems. The creation of kernfs resulted from splitting off part of the internal logic used by sysfs, which provides a set of virtual files by exporting information about hardware devices and associated device drivers from the kernel's device model to user space, into an independent and reusable functionality so other kernel subsystems can implement their own pseudo file systems more easily and consistently.")),Object(r.b)("hr",null),Object(r.b)("h2",{id:"lxc"},"LXC"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"LXC (Linux Containers) is an operating-system-level virtualization method for running multiple isolated Linux systems (containers) on a control host using a single Linux kernel."),Object(r.b)("li",{parentName:"ul"},"The Linux kernel provides the cgroups functionality that allows limitation and prioritization of resources (CPU, memory, block I/O, network, etc.) without the need for starting any virtual machines, and also namespace isolation functionality that allows complete isolation of an application's view of the operating environment, including process trees, networking, user IDs and mounted file systems."),Object(r.b)("li",{parentName:"ul"},"LXC combines the kernel's cgroups and support for isolated namespaces to provide an isolated environment for applications.")),Object(r.b)("h3",{id:"advantages"},"Advantages"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Security: network services can be run in a container, which limits the damage caused by a security breach or violation. An intruder who successfully exploits a security hole on one of the applications running in that container is restricted to the set of actions possible within that container."),Object(r.b)("li",{parentName:"ul"},"Isolation: containers allow the deployment of one or more applications on the same physical machine, even if those applications must operate under different domains, each requiring exclusive access to its respective resources. For instance, multiple applications running in different containers can bind to the same physical network interface by using distinct IP addresses associated with each container."),Object(r.b)("li",{parentName:"ul"},"Virtualization and transparency: containers provide the system with a virtualized environment that can hide or limit the visibility of the physical devices or system's configuration underneath it. The general principle behind a container is to avoid changing the environment in which applications are running with the exception of addressing security or isolation issues.")),Object(r.b)("hr",null),Object(r.b)("h2",{id:"docker"},"Docker"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Docker is an Apache-licensed open-source ",Object(r.b)("em",{parentName:"li"},"containerization technology")," designed to automate the repetitive task of creating and deploying microservices inside containers. "),Object(r.b)("li",{parentName:"ul"},"Docker treats containers as if they were extremely lightweight and modular virtual machines. "),Object(r.b)("li",{parentName:"ul"},"Initially, Docker was built on top of LXC, but it has since moved away from that dependency, resulting in a better developer and user experience. Much like LXC, Docker continues to make use of the kernel cgroup subsystem. The technology is more than just running containers, it also eases the process of creating containers, building images, sharing those built images and versioning them.")),Object(r.b)("h3",{id:"advantages-1"},"Advantages"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Portability: Docker provides an image-based deployment model. This type of portability allows for an easier way to share an application or set of services (with all of their dependencies) across multiple environments."),Object(r.b)("li",{parentName:"ul"},"Version control: a single Docker image is made up of a series of combined layers. A new layer is created whenever the image is altered. For instance, a new layer is created every time a user specifies a command, such as run or copy. Docker will reuse these layers for new container builds. Layering to Docker is its very own method of version control."),Object(r.b)("li",{parentName:"ul"},"Rollback: again, every Docker image has layers. If you don't want to use the currently running layer, you can roll back to a previous version. This type of agility makes it easier for software developers to integrate and deploy their software technology continuously."),Object(r.b)("li",{parentName:"ul"},"Rapid deployment: provisioning new hardware often can take days. And, the amount of effort and overhead to get it installed and configured is quite burdensome. With Docker, you can avoid all of that by reducing the time it takes to get an image up and running to a matter of seconds. When you're done with a container, you can destroy it just as easily.")),Object(r.b)("hr",null),Object(r.b)("h2",{id:"lxc-vs-docker"},"LXC v.s. Docker"),Object(r.b)("h3",{id:"process-management"},"Process Management"),Object(r.b)("p",null,"Docker restricts containers to run as a ",Object(r.b)("strong",{parentName:"p"},"single")," process. If your application consists of X number of concurrent processes, Docker will want you to run X number of containers, each with its own distinct process. This is not the case with LXC, which runs a container with a conventional init process and, in turn, can host multiple processes inside that same container. For example, if you want to host a LAMP (Linux + Apache + MySQL + PHP) server, each process for each application will need to span across multiple Docker containers."),Object(r.b)("h3",{id:"state-management"},"State Management"),Object(r.b)("p",null,"Docker is designed to be stateless, meaning it doesn't support persistent storage. There are ways around this, but again, it's only necessary when the process requires it. When a Docker image is created, it will consist of read-only layers. This will not change. During runtime, if the process of the container makes any changes to its internal state, a diff between the internal state and the current state of the image will be maintained until either a commit is made to the Docker image (creating a new layer) or until the container is deleted, resulting in that diff disappearing."),Object(r.b)("h3",{id:"portability"},"Portability"),Object(r.b)("p",null,"This word tends to be overused when discussing Docker\u2014that's because it's the single-most important advantage Docker has over LXC. Docker does a much better job of abstracting away the networking, storage and operating system details from the application. This results in a truly configuration-independent application, guaranteeing that the environment for the application always will remain the same, regardless of the machine on which it is enabled."),Object(r.b)("p",null,"Docker is designed to benefit both developers and system administrators. It has made itself an integral part of many DevOps (developers + operations) toolchains. Developers can focus on writing code without having to worry about the system ultimately hosting it. With Docker, there's no need to install and configure complex databases or worry about switching between incompatible language toolchain versions. Docker gives the operations staff flexibility, often reducing the number of physical systems needed to host some of the smaller and more basic applications. Docker streamlines software delivery. New features and bug/security fixes reach the customer quickly without any hassle, surprises or downtime."),Object(r.b)("hr",null),Object(r.b)("h2",{id:"kubernetes"},"Kubernetes"),Object(r.b)("p",null,"Kubernetes, or k8s (k + eight characters), originally was developed by Google. It's an open-source platform aiming to automate container operations: \"deployment, scaling and operations of application containers across clusters of hosts\". Google was an early adopter and contributor to the Linux Container technology (in fact, Linux Containers power Google's very own cloud services). Kubernetes eliminates all of the manual processes involved in the deployment and scaling of containerized applications. It's capable of clustering together groups of servers hosting Linux Containers while also allowing administrators to manage those clusters easily and efficiently."),Object(r.b)("hr",null),Object(r.b)("h2",{id:"references"},"References"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",Object(i.a)({parentName:"li"},{href:"https://domino.research.ibm.com/library/cyberdig.nsf/papers/0929052195DD819C85257D2300681E7B/$File/rc25482.pdf"}),"IBM Research Report: An Updated Performance Comparison of Virtual Machines and Linux Containers")),Object(r.b)("li",{parentName:"ul"},"Everything You Need to Know about Linux Containers",Object(r.b)("ul",{parentName:"li"},Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",Object(i.a)({parentName:"li"},{href:"https://www.linuxjournal.com/content/everything-you-need-know-about-linux-containers-part-i-linux-control-groups-and-process"}),"Part I: Linux Control Groups and Process Isolation")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",Object(i.a)({parentName:"li"},{href:"https://www.linuxjournal.com/content/everything-you-need-know-about-linux-containers-part-ii-working-linux-containers-lxc"}),"Part II: Working with Linux Containers (LXC)")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",Object(i.a)({parentName:"li"},{href:"https://www.linuxjournal.com/content/everything-you-need-know-about-containers-part-iii-orchestration-kubernetes"}),"Part III: Orchestration with Kubernetes"))))))}u.isMDXComponent=!0},268:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return m}));var i=n(0),a=n.n(i);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=a.a.createContext({}),u=function(e){var t=a.a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},d=function(e){var t=u(e.components);return a.a.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},h=a.a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,o=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),d=u(n),h=i,m=d["".concat(o,".").concat(h)]||d[h]||p[h]||r;return n?a.a.createElement(m,s(s({ref:t},l),{},{components:n})):a.a.createElement(m,s({ref:t},l))}));function m(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,o=new Array(r);o[0]=h;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:i,o[1]=s;for(var l=2;l<r;l++)o[l]=n[l];return a.a.createElement.apply(null,o)}return a.a.createElement.apply(null,n)}h.displayName="MDXCreateElement"}}]);