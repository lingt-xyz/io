<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.58">
<link rel="search" type="application/opensearchdescription+xml" title="Ling" href="/opensearch.xml">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous"><title data-react-helmet="true">Dual-boot System time is wrong | Ling</title><meta data-react-helmet="true" property="og:title" content="Dual-boot System time is wrong | Ling"><meta data-react-helmet="true" name="description" content="Debian 10 and Windows 10 system time always get wrong after reboot."><meta data-react-helmet="true" property="og:description" content="Debian 10 and Windows 10 system time always get wrong after reboot."><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link rel="stylesheet" href="/styles.e8101577.css">
<link rel="preload" href="/styles.1d28e0b6.js" as="script">
<link rel="preload" href="/runtime~main.aef61503.js" as="script">
<link rel="preload" href="/main.2ba34a92.js" as="script">
<link rel="preload" href="/1.4994cffe.js" as="script">
<link rel="preload" href="/2.df77c79b.js" as="script">
<link rel="preload" href="/3.20f759ae.js" as="script">
<link rel="preload" href="/ccc49370.4d330ead.js" as="script">
<link rel="preload" href="/3c280ca1.543ff556.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):e.matches&&t("dark")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.svg" alt="Logo"><strong class="navbar__title">Ling</strong></a><a class="navbar__item navbar__link" href="/docs/course/INSE6130">Course</a><a class="navbar__item navbar__link" href="/docs/TA/COMP352">TA</a><a class="navbar__item navbar__link" href="/docs/research/MathTax">Research</a><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a activeclassname="navbar__link--active" class="navbar__item navbar__link">Programming</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/programming/container/Container">Container</a></li><li><a class="dropdown__link" href="/docs/programming/Go/Why">Go</a></li><li><a class="dropdown__link" href="/docs/programming/Python/Python">Python</a></li><li><a class="dropdown__link" href="/docs/programming/C++/C++">C++</a></li><li><a class="dropdown__link" href="/docs/programming/database/Cassandra_in_Docker">Database</a></li></ul></div><a class="navbar__item navbar__link" href="/docs/linux/Bash">Linux</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/lingt-xyz/lingt-xyz.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><div class="navbar__search"><div class="searchWrapper_-F3-"><span aria-label="expand searchbar" role="button" class="searchIconButton_1Dnz" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input searchInput_2eto"></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.svg" alt="Logo"><strong class="navbar__title">Ling</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/course/INSE6130">Course</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/TA/COMP352">TA</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/research/MathTax">Research</a></li><li class="menu__list-item"><a activeclassname="navbar__link--active" class="menu__link menu__link--sublist">Programming</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/programming/container/Container">Container</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/programming/Go/Why">Go</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/programming/Python/Python">Python</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/programming/C++/C++">C++</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/programming/database/Cassandra_in_Docker">Database</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/docs/linux/Bash">Linux</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/blog">Blog</a></li><li class="menu__list-item"><a href="https://github.com/lingt-xyz/lingt-xyz.github.io" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="container margin-vert--lg"><div class="row"><div class="col col--8 col--offset-2"><article><header><h1 class="margin-bottom--sm blogPostTitle_2RZH">Dual-boot System time is wrong</h1><div class="margin-vert--md"><time datetime="2019-07-17T00:00:00.000Z" class="blogPostDate_3tRe">July 17, 2019  · 2 min read</time></div><div class="avatar margin-vert--md"><div class="avatar__intro"></div></div></header><section class="markdown"><p>Debian 10 and Windows 10 system time always get wrong after reboot.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="problem"></a>Problem<a aria-hidden="true" tabindex="-1" class="hash-link" href="#problem" title="Direct link to heading">#</a></h2><p>System time is wrong under dual-boot environment.</p><hr><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="reason"></a>Reason<a aria-hidden="true" tabindex="-1" class="hash-link" href="#reason" title="Direct link to heading">#</a></h2><ul><li>Linux systems reconstruct local time from universal time and the timezone information, so recommend using the CMOS clock in universal time.</li><li>Windows systems in their default configuration ignore this recommendation; they keep the CMOS clock on local time, applying time changes when booting the computer by trying to guess during time changes if the change has already been applied or not.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="background"></a>Background<a aria-hidden="true" tabindex="-1" class="hash-link" href="#background" title="Direct link to heading">#</a></h3><ul><li>System clock, hardware clock are two time sources in a computer. Computer&#x27;s motherboard has a hardware clock (CMOS clock), which is not very precise, and provides rather slow access times. The operating system kernel has its own, the software clock, which it keeps up to date with its own means. This system clock is generally more accurate, especially since it doesn&#x27;t need access to hardware variables. However, since it only exists in live memory, it is zeroed out every time the machine is booted, contrary to the CMOS clock, which has a battery and therefore “survives” rebooting or halting of the machine. The system clock is, thus, set from the CMOS clock during boot, and the CMOS clock is updated on shutdown.</li><li>NTP (Network Time Protocol) allows a machine to synchronize with others fairly accurately, taking into consideration the delays induced by the transfer of information over the network and other possible offsets.</li></ul><hr><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="solution"></a>Solution<a aria-hidden="true" tabindex="-1" class="hash-link" href="#solution" title="Direct link to heading">#</a></h2><ul><li>Setting the registry key <code>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\TimeZoneInformation\RealTimeIsUniversal</code> to <code>1</code> as a <code>DWORD</code>.</li></ul><hr><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="terminology"></a>Terminology<a aria-hidden="true" tabindex="-1" class="hash-link" href="#terminology" title="Direct link to heading">#</a></h2><ol><li>RTC: real time clock</li><li>hardware clock = RTC</li><li>CMOS clock = hardware clock<ul><li>When system boots, it populates the system time with the date and time read from the hardware clock.</li></ul></li><li>NTP: Network Time Protocol<ul><li>NTP server: a time server on the Internet.</li></ul></li><li>GMT: Greenwich Mean Time</li><li>UTC: Coordinated Universal Time. UTC was previously called GMT. UTC is constant, and is not subject to Daylight Saving Time or other changes.<ul><li>This is why the base time is better to be kept in UTC.</li></ul></li><li>DST: Daylight Saving Time</li></ol><hr><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="command"></a>Command<a aria-hidden="true" tabindex="-1" class="hash-link" href="#command" title="Direct link to heading">#</a></h2><ol><li><code>date</code>: show/change &#x27;soft&#x27; time.</li><li><code>TZ</code>: temporarily change the timezone, it takes priority over the configured system default.</li></ol><hr><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="references"></a>References<a aria-hidden="true" tabindex="-1" class="hash-link" href="#references" title="Direct link to heading">#</a></h2><ul><li><a href="https://www.debian.org/doc/manuals/debian-handbook/sect.config-misc.en.html">Time Synchronization</a></li><li><a href="https://wiki.debian.org/DateTime" target="_blank" rel="noopener noreferrer">Date time</a></li><li><a href="https://www.debian.org/doc/manuals/system-administrator/ch-sysadmin-time.html">Debian GNU/Linux System Administrator&#x27;s Manual</a></li></ul></section></article><div><a href="https://github.com/lingt-xyz/io/tree/master/blog/2019-07-17-dual-boot-sysmte-time-is-wrong.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="margin-vert--xl"><nav class="pagination-nav" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/blog/2019/08/07/install-java-8-on-debian-10"><div class="pagination-nav__sublabel">Previous Post</div><div class="pagination-nav__label">« Install Java 8 on Debian 10</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/blog/2019/03/07/back-to-black"><div class="pagination-nav__sublabel">Next Post</div><div class="pagination-nav__label">Back to black »</div></a></div></nav></div></div></div></div></div><footer class="footer footer--dark"><div class="container"><div class="text--center"><div>Copyright © 2020 Ling. Built with Docusaurus.</div></div></div></footer></div>
<script src="/styles.1d28e0b6.js"></script>
<script src="/runtime~main.aef61503.js"></script>
<script src="/main.2ba34a92.js"></script>
<script src="/1.4994cffe.js"></script>
<script src="/2.df77c79b.js"></script>
<script src="/3.20f759ae.js"></script>
<script src="/ccc49370.4d330ead.js"></script>
<script src="/3c280ca1.543ff556.js"></script>
</body>
</html>